---
import BaseLayout from '../components/layout/BaseLayout.astro';
import RiskVisualization from '../components/RiskVisualization.astro';
---

<BaseLayout>
  <!-- Full-Width Hero with Overlay - Brighton College Style -->
  <section class="hero-overlay-style">
    <div class="hero-background-image">
      <img src="/images/family1.webp" alt="Family healthcare consultation" class="hero-bg-img" />
    </div>
    <div class="hero-overlay-gradient"></div>
    <div class="container hero-content-container">
      <div class="hero-content-overlay">
        <h1 class="hero-title-dark">
          Accurate, Non-Invasive
          <span class="hero-title-break-dark">Prostate Cancer Screening</span>
        </h1>

        <p class="hero-description-dark">
          Advanced bi-parametric MRI technology provides precise prostate cancer
          detection without radiation exposure or invasive procedures.
        </p>

        <div class="hero-actions-dark">
          <a href="/book-mri" class="btn-primary btn-large">
            Schedule Your Screening
          </a>
          <a href="/consultation" class="btn-secondary-dark btn-large">
            Learn More
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Formal Statistics Section -->
  <section class="stats formal-section">
    <div class="container">
      <h2 class="stats-header">Biparametric MRI</h2>
      <div class="stats-grid scroll-animate-stagger">
        <div class="stat-item formal-card">
          <div class="stat-number">96%</div>
          <div class="stat-label">Clinical Accuracy</div>
        </div>
        <div class="stat-item formal-card">
          <div class="stat-number">0</div>
          <div class="stat-label">Radiation Exposure</div>
        </div>
        <div class="stat-item formal-card">
          <div class="stat-number">20</div>
          <div class="stat-label">Minute Procedure</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Formal PSA Limitations Section -->
  <section class="content-section formal-section">
    <div class="container">
      <div class="section-header scroll-animate">
        <div class="section-eyebrow formal-eyebrow">Clinical Limitations</div>
        <h2 class="section-title">
          PSA Testing Has Significant Drawbacks
        </h2>
        <p class="section-subtitle formal-lead">
          Prostate-Specific Antigen (PSA) testing suffers from poor specificity and sensitivity, 
          leading to unnecessary procedures and missed diagnoses.
        </p>
      </div>
      
      <div class="content-grid">
        <div class="content-image">
          <img src="/images/bloodtest.webp" alt="Elderly patient receiving blood draw for PSA testing" class="psa-limitations-img" />
        </div>

        <div class="content-cards">
          <div class="card formal-card scroll-animate-left">
            <div class="card-header">
              <div class="card-number">01</div>
              <div class="card-stat">75%</div>
            </div>
            <h3 class="card-title">Poor Specificity</h3>
            <p class="card-description">
              PSA elevation occurs in benign conditions, leading to unnecessary interventions. 75% false positive rate means most elevated PSA results don't indicate cancer.
            </p>
          </div>
          <div class="card formal-card scroll-animate-right">
            <div class="card-header">
              <div class="card-number">02</div>
              <div class="card-stat">20%</div>
            </div>
            <h3 class="card-title">Limited Sensitivity</h3>
            <p class="card-description">
              Normal PSA levels can mask clinically significant cancers. 20% of cancers are missed with normal PSA readings.
            </p>
          </div>
          <div class="card formal-card scroll-animate-left">
            <div class="card-header">
              <div class="card-number">03</div>
              <div class="card-stat">25%</div>
            </div>
            <h3 class="card-title">Unnecessary Procedures</h3>
            <p class="card-description">
              Blind biopsies carry risks and often detect insignificant disease. 25% complication rate from invasive procedures.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Image Feature Section - Brighton College Style -->
  <section class="content-section image-feature-section alt-bg">
    <div class="container">
      <div class="scroll-animate-scale">
        <div class="image-feature-grid">
          <div class="image-feature-content scroll-animate-left">
            <div class="formal-eyebrow">State-of-the-Art Technology</div>
            <h2 class="section-title">Advanced Imaging Excellence</h2>
            <p class="formal-lead" style="color: var(--color-gray-700);">
              Our cutting-edge MRI technology provides unparalleled clarity and precision,
              enabling our specialists to detect and assess prostate conditions with exceptional accuracy.
            </p>
            <p style="color: var(--color-gray-600); font-size: 1.125rem; line-height: 1.7;">
              We utilize the latest bi-parametric MRI systems, specifically calibrated for prostate imaging,
              ensuring optimal diagnostic quality while maintaining patient comfort throughout the procedure.
            </p>
          </div>
          <div class="image-feature-image scroll-animate-right">
            <img src="/images/mri-scanner-modern.jpg" alt="Modern MRI scanner technology" class="feature-img parallax-image" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Formal bpMRI Advantages Section - Navy Background -->
  <section class="content-section section-navy formal-section">
    <div class="container">
      <div class="section-header scroll-animate">
        <div class="section-eyebrow formal-eyebrow">Advanced Technology</div>
        <h2 class="section-title">
          Bi-parametric MRI Superior Diagnostic Accuracy
        </h2>
        <p class="section-subtitle formal-lead">
          Advanced imaging technology that overcomes PSA testing limitations through precise
          anatomical and functional assessment of prostate tissue.
        </p>
      </div>
      
      <div class="advantage-grid">
        <div class="advantage-card">
          <div class="advantage-header">
            <div class="advantage-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
              </svg>
            </div>
            <h3 class="advantage-title">T2-Weighted Imaging</h3>
          </div>
          <p class="advantage-description">
            High-resolution anatomical visualization enables precise identification of suspicious
            lesions and assessment of prostate gland architecture.
          </p>
        </div>

        <div class="advantage-card">
          <div class="advantage-header">
            <div class="advantage-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
              </svg>
            </div>
            <h3 class="advantage-title">Diffusion-Weighted Imaging</h3>
          </div>
          <p class="advantage-description">
            Functional imaging detects cellular density changes characteristic of malignancy,
            providing biochemical information invisible to conventional testing.
          </p>
        </div>

        <div class="advantage-card">
          <div class="advantage-header">
            <div class="advantage-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
            </div>
            <h3 class="advantage-title">No Contrast Required</h3>
          </div>
          <p class="advantage-description">
            Eliminates gadolinium injection risks while maintaining diagnostic accuracy,
            making the procedure safer and more comfortable.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Interactive Risk Visualization -->
  <section class="content-section">
    <div class="container">
      <div class="section-header scroll-animate">
        <div class="section-eyebrow">Clinical Evidence</div>
        <h2 class="section-title">
          See the Data
          <span style="display: block;">Proven Results</span>
        </h2>
        <p class="section-subtitle">
          Compare screening outcomes and understand the bpMRI advantage
        </p>
      </div>
      <div class="scroll-animate-scale">
        <RiskVisualization />
      </div>
    </div>
  </section>

  <!-- Clean Process Timeline Section -->
  <section class="content-section timeline-section" id="timeline-section">
    <div class="timeline-background-overlay"></div>
    <div class="container">
      <div class="section-header scroll-animate">
        <div class="section-eyebrow">Screening Process</div>
        <h2 class="section-title">
          Your Journey to Accurate Results
        </h2>
        <p class="section-subtitle">
          A streamlined process from consultation to results delivery
        </p>
      </div>

      <div class="process-timeline">
        <div class="process-timeline-line"></div>
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">01</div>
            <div class="step-text">
              <h3 class="step-title">Consultation</h3>
              <p class="step-description">Medical history review and risk assessment with our specialist team</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">02</div>
            <div class="step-text">
              <h3 class="step-title">Assessment</h3>
              <p class="step-description">Comprehensive evaluation of screening appropriateness and timing</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">03</div>
            <div class="step-text">
              <h3 class="step-title">Scheduling</h3>
              <p class="step-description">Convenient appointment booking at our state-of-the-art facility</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">04</div>
            <div class="step-text">
              <h3 class="step-title">Preparation</h3>
              <p class="step-description">Simple pre-procedure instructions and comfort optimization</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">05</div>
            <div class="step-text">
              <h3 class="step-title">bpMRI Scan</h3>
              <p class="step-description">20-minute non-invasive imaging with advanced technology</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">06</div>
            <div class="step-text">
              <h3 class="step-title">Expert Review</h3>
              <p class="step-description">Specialized prostate imaging radiologist analyzes your results</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">07</div>
            <div class="step-text">
              <h3 class="step-title">Results Report</h3>
              <p class="step-description">Comprehensive report with detailed findings and recommendations</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">08</div>
            <div class="step-text">
              <h3 class="step-title">Consultation</h3>
              <p class="step-description">Personal consultation to discuss results and next steps</p>
            </div>
          </div>
        </div>
        
        <div class="process-step">
          <div class="step-content">
            <div class="step-number">09</div>
            <div class="step-text">
              <h3 class="step-title">Follow-Up</h3>
              <p class="step-description">Personalized monitoring schedule or treatment referral if needed</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Clean Clinical Benefits Section -->
  <section class="content-section">
    <div class="container">
      <div class="scroll-animate-scale">
        <div class="section-header scroll-animate">
          <div class="section-eyebrow">Clinical Advantages</div>
          <h2 class="section-title">
            Evidence-Based Medical Benefits
          </h2>
        </div>

        <div class="benefits-grid">
        <div class="benefit-card">
          <div class="benefit-header">
            <div class="benefit-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="6"/>
                <circle cx="12" cy="12" r="2"/>
              </svg>
            </div>
            <h3 class="benefit-title">Targeted Detection</h3>
          </div>
          <p class="benefit-description">
            Distinguishes clinically significant cancers from indolent disease,
            reducing over-diagnosis while ensuring appropriate treatment.
          </p>
        </div>

        <div class="benefit-card">
          <div class="benefit-header">
            <div class="benefit-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 12l2 2 4-4"/>
                <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
                <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
                <path d="M13 12h3"/>
                <path d="M8 12H5"/>
              </svg>
            </div>
            <h3 class="benefit-title">Non-Invasive Safety</h3>
          </div>
          <p class="benefit-description">
            Eliminates procedure-related complications associated with biopsies
            while providing superior diagnostic information.
          </p>
        </div>

        <div class="benefit-card">
          <div class="benefit-header">
            <div class="benefit-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 3v18h18"/>
                <path d="M18 17V9"/>
                <path d="M13 17V5"/>
                <path d="M8 17v-3"/>
              </svg>
            </div>
            <h3 class="benefit-title">Quantitative Results</h3>
          </div>
          <p class="benefit-description">
            Provides objective, reproducible measurements that support
            evidence-based clinical decision making.
          </p>
        </div>

        <div class="benefit-card">
          <div class="benefit-header">
            <div class="benefit-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
            </div>
            <h3 class="benefit-title">Reliable Reassurance</h3>
          </div>
          <p class="benefit-description">
            Normal results provide high-confidence reassurance, eliminating
            unnecessary anxiety and follow-up procedures.
          </p>
        </div>
      </div>
      </div>
    </div>
  </section>

  <!-- Patient Care Section - Brighton College Style -->
  <section class="content-section patient-care-section alt-bg">
    <div class="container">
      <div class="patient-care-grid">
        <div class="patient-care-image scroll-animate-left">
          <img src="/images/consult.webp" alt="Healthcare provider consulting with elderly patient in modern office" class="care-img" />
        </div>
        <div class="patient-care-content scroll-animate-right">
          <div class="formal-eyebrow">Personalized Care</div>
          <h2 class="section-title">Expert Guidance at Every Step</h2>
          <p class="formal-lead" style="color: var(--color-gray-700);">
            Our dedicated specialists provide comprehensive support throughout your screening journey,
            ensuring you understand every aspect of your prostate health assessment.
          </p>
          <div class="care-features">
            <div class="care-feature-item">
              <div class="care-feature-number">01</div>
              <div class="care-feature-text">
                <h4>Individual Consultation</h4>
                <p>Detailed discussion of your medical history and screening objectives with experienced specialists.</p>
              </div>
            </div>
            <div class="care-feature-item">
              <div class="care-feature-number">02</div>
              <div class="care-feature-text">
                <h4>Results Interpretation</h4>
                <p>Clear explanation of findings and personalized recommendations for your ongoing health management.</p>
              </div>
            </div>
            <div class="care-feature-item">
              <div class="care-feature-number">03</div>
              <div class="care-feature-text">
                <h4>Continuous Support</h4>
                <p>Ongoing access to our medical team for questions and guidance throughout your care journey.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Clean CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="cta-title">
          Advanced Screening Expert Care
        </h2>
        <p class="cta-description">
          Take the proactive step toward accurate prostate health assessment.
          Our specialized team provides comprehensive screening with immediate results consultation.
        </p>
        <div class="cta-actions">
          <a href="/book-mri" class="btn-primary btn-large">
            Schedule Your Screening
          </a>
          <a href="/consultation" class="btn-secondary btn-large">
            Speak with Our Team
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<!-- Scroll-Triggered Animations Script -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Timeline animation
    const sections = document.querySelectorAll('.process-step');
    const timeline = document.querySelector('.process-timeline');
    const line = document.querySelector('.process-timeline-line');
    let prevScrollY = window.scrollY;
    let ticking = false;

    function scrollHandler() {
      const { scrollY } = window;
      const up = scrollY < prevScrollY;

      if (timeline && line) {
        const timelineRect = timeline.getBoundingClientRect();
        const timelineTop = timelineRect.top + scrollY;
        const timelineHeight = timeline.offsetHeight;
        const viewportHeight = window.innerHeight;

        // Start growing when timeline enters viewport
        const scrollTriggerStart = timelineTop - viewportHeight + 300;
        // Complete when timeline bottom reaches middle of viewport
        const scrollTriggerEnd = timelineTop + timelineHeight - (viewportHeight / 2);

        // Calculate progress (0 to 1)
        const scrollProgress = (scrollY - scrollTriggerStart) / (scrollTriggerEnd - scrollTriggerStart);
        const clampedProgress = Math.max(0, Math.min(1, scrollProgress));

        // Set line height based on progress - extend to full height plus padding
        const lineHeight = clampedProgress * (timelineHeight + 100); // Extra 100px for top/bottom padding
        line.style.height = `${lineHeight}px`;
      }

      // Handle section animations
      const targetY = window.innerHeight * 0.8;
      sections.forEach(item => {
        const rect = item.getBoundingClientRect();

        if (rect.top + item.offsetHeight / 5 < targetY) {
          item.classList.add('show-me');
        } else if (up && rect.top > targetY) {
          item.classList.remove('show-me');
        }
      });

      prevScrollY = scrollY;
      ticking = false;
    }

    // Use requestAnimationFrame for smooth performance
    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(scrollHandler);
        ticking = true;
      }
    }

    // General scroll animations for all elements
    function handleScrollAnimations() {
      const animatedElements = document.querySelectorAll(
        '.scroll-animate, .scroll-animate-left, .scroll-animate-right, .scroll-animate-scale, .scroll-animate-stagger'
      );

      animatedElements.forEach(element => {
        const rect = element.getBoundingClientRect();
        const windowHeight = window.innerHeight;

        // Trigger animation when element enters viewport from bottom
        // Remove when element exits viewport from top (scrolling up past it)
        if (rect.top < windowHeight * 0.8 && rect.bottom > windowHeight * 0.2) {
          element.classList.add('visible');
        } else {
          element.classList.remove('visible');
        }
      });

      // Parallax effect for images
      const parallaxImages = document.querySelectorAll('.parallax-image');
      parallaxImages.forEach(image => {
        const rect = image.getBoundingClientRect();
        const scrollPercent = (window.innerHeight - rect.top) / (window.innerHeight + rect.height);
        const translateY = (scrollPercent - 0.5) * 30; // Subtle movement

        if (scrollPercent >= 0 && scrollPercent <= 1) {
          image.style.transform = `translateY(${translateY}px) scale(1.05)`;
        }
      });
    }

    // Initialize
    scrollHandler();
    handleScrollAnimations();

    window.addEventListener('scroll', () => {
      requestTick();
      handleScrollAnimations();
    }, { passive: true });

    // Add hover effects for timeline
    sections.forEach(step => {
      const content = step.querySelector('.step-content');

      if (content) {
        content.addEventListener('mouseenter', () => {
          if (step.classList.contains('show-me')) {
            content.style.transform = 'translateY(-4px)';
            content.style.boxShadow = '0 12px 30px rgba(0, 0, 0, 0.15)';
          }
        });

        content.addEventListener('mouseleave', () => {
          content.style.transform = 'translateY(0)';
          content.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.08)';
        });
      }
    });
  });
</script>
