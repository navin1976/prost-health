---
import BaseLayout from '../components/layout/BaseLayout.astro';
import ScreeningForm from '../components/sections/ScreeningForm.astro';
---

<BaseLayout title="Request Screening" description="Complete our comprehensive screening request form for prostate cancer assessment">
  
  <!-- Request Page Header - Pushed down to clear header -->
  <section class="request-hero">
    <div class="container">
        <div class="header-content text-center scroll-animate">
            <h1 class="hero-title">Begin Your Assessment</h1>
            <p class="hero-subtitle">
                A precise, MRI-first approach to your health. Complete this secure form to generate your personalized risk profile based on NICE NG131 guidelines.
            </p>
        </div>
    </div>
  </section>

  <!-- Main Content Area -->
  <section class="request-content">
    <div class="container">
        <div class="layout-grid">
            
            <!-- Left Column: The Form (Constrained width now) -->
            <div class="form-column scroll-animate">
                <ScreeningForm />
            </div>

            <!-- Right Column: Information & Context -->
            <div class="info-column scroll-animate" style="transition-delay: 0.2s">
                <div class="info-sticky">
                    
                    <!-- Info Card 1 -->
                    <div class="info-card">
                        <h3>Why this matters</h3>
                        <p>
                            Standard screenings can be imprecise. Our assessment helps determine if you are a candidate for advanced Multiparametric MRI, which offers 97% accuracy in ruling out significant cancer.
                        </p>
                    </div>

                    <!-- Info Card 2 -->
                    <div class="info-card">
                         <h3>Privacy First</h3>
                        <p>
                            Your data is processed locally to generate your PDF report. We do not store your personal medical history on our servers.
                        </p>
                    </div>

                    <!-- Info Card 3 -->
                    <div class="info-card dark-card">
                        <h3>Need Assistance?</h3>
                        <p>
                            If you have questions about the screening process or need help completing this form, our clinical team is here to assist.
                        </p>
                        <a href="/contact" class="btn-link">Contact Support &rarr;</a>
                    </div>

                </div>
            </div>
        </div>
    </div>
  </section>

</BaseLayout>

<style>
  .request-hero {
      padding-top: calc(var(--header-height) + 6rem); /* Increased clearance */
      padding-bottom: 5rem;
      background-color: var(--color-background);
      /* Removed border-bottom to reduce "lines" */
  }

  .header-content {
      max-width: 900px;
      margin: 0 auto;
      text-align: center;
  }

  .hero-title {
      font-size: clamp(3rem, 6vw, 5rem);
      margin-bottom: 1.5rem;
      line-height: 1.1;
      font-weight: 300;
      text-align: center;
  }

  .hero-subtitle {
      font-size: 1.35rem;
      color: var(--color-text-secondary);
      line-height: 1.6;
      max-width: 700px;
      margin: 0 auto;
      font-weight: 300;
      text-align: center;
  }


  .hero-title {
      font-size: clamp(3rem, 6vw, 5rem);
      margin-bottom: 1.5rem;
      line-height: 1.1;
      font-weight: 300;
  }

  .hero-subtitle {
      font-size: 1.35rem;
      color: var(--color-text-secondary);
      line-height: 1.6;
      max-width: 700px;
      margin: 0 auto;
      font-weight: 300;
  }

  .request-content {
      padding: 5rem 0;
      background-color: #f2f2f2; /* Slightly darker grey to make white pop */
      min-height: 100vh;
  }

  /* Ensure the whole grid is centered on screen */
  .layout-grid {
      display: grid;
      grid-template-columns: 1fr 360px; /* Sidebar slightly narrower */
      gap: 4rem;
      align-items: start;
      max-width: 1300px; /* Wider container to accommodate padding */
      margin: 0 auto;
  }

  /* Form is now the "Hero" - White paper style */
  .form-column {
      background: var(--color-white);
      padding: 4rem; /* Generous padding */
      box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 20px 40px rgba(0,0,0,0.02);
      border-radius: 0; /* Sharp edges for editorial look */
      width: 100%;
      max-width: none; /* Let grid control width */
  }

  @media (max-width: 1024px) {
      .layout-grid {
          grid-template-columns: 1fr;
          gap: 4rem;
          max-width: 800px;
      }
      
      .form-column {
          padding: 2rem; /* Less padding on mobile */
      }
      
      .info-column {
          order: 1;
      }
  }

  .info-sticky {
      position: sticky;
      top: calc(var(--header-height) + 2rem);
      display: flex;
      flex-direction: column;
      gap: 2.5rem;
      padding-top: 1rem; /* Visual alignment */
  }

  /* Sidebar is now subtle/supporting */
  .info-card {
      background: transparent; /* Remove card styling */
      padding: 0;
      border: none;
      border-left: none;
      box-shadow: none;
  }
  
  .info-card h3 {
      font-size: 0.95rem;
      margin-bottom: 0.75rem;
      font-family: var(--font-body);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-secondary);
      border-bottom: 1px solid #e5e5e5;
      padding-bottom: 0.5rem;
      display: inline-block;
  }

  .info-card p {
      font-size: 1rem;
      margin-bottom: 0;
      line-height: 1.6;
      color: #555; /* Darker grey for readability on grey bg */
  }

  .dark-card {
      background: var(--color-black);
      color: var(--color-white);
      padding: 2rem; /* Keep padding for the dark callout */
      border-radius: 4px;
  }

  .dark-card h3 {
      color: var(--color-white);
      border-color: rgba(255,255,255,0.2);
  }
  
  .dark-card p {
      color: rgba(255,255,255,0.8);
  }
  
  .btn-link {
      display: inline-block;
      margin-top: 1rem;
      color: var(--color-gold);
      text-decoration: none;
      font-weight: 500;
      border-bottom: 1px solid var(--color-gold);
      padding-bottom: 2px;
      transition: all 0.3s;
  }
  
  .btn-link:hover {
      color: var(--color-white);
      border-color: var(--color-white);
  }

  /* Animations */
  .scroll-animate {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .animate-in {
    opacity: 1;
    transform: translate(0, 0);
  }
</style>

<script>
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-in');
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.scroll-animate').forEach((el) => {
    observer.observe(el);
  });
</script>
